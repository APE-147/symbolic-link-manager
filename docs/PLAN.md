# PLAN

> 每次运行在文件底部追加一个 Cycle（6–8 个问题 + 选项效果 + 进度）。

## Cycle 1 - 2025-10-13 00:00  (@source: REQUIRES.md + PLAN prompt.md)
Progress: 0.00%  (from TASKS.md)

**[S0｜完成度 5%]**

Q1. 目标用户与首要场景？
- A) 个人开发者管理本地项目符号链接 ★
   - 效果：范围聚焦/风险低/质量易控/复杂度中/工期短/成本低/可观测性强（加权：UX 4.5｜代码整洁 4.2｜部署便捷 4.8｜安全 4.0｜成本 4.5 → 总分 4.46）
- B) 团队协作环境下的符号链接集中管理
   - 效果：范围扩大/风险中/质量要求高/复杂度高/工期长/成本中/可观测性需增强（加权：UX 3.8｜代码整洁 3.5｜部署便捷 3.2｜安全 4.5｜成本 3.0 → 总分 3.66）
- C) 跨平台企业级链接维护系统
   - 效果：范围最大/风险高/质量严苛/复杂度很高/工期最长/成本高/可观测性复杂（加权：UX 3.2｜代码整洁 3.0｜部署便捷 2.5｜安全 4.8｜成本 2.0 → 总分 3.05）

Q2. 交互模式优先级？
- A) 纯命令行交互式 TUI（Terminal UI）★
   - 效果：范围适中/风险低/质量易验证/复杂度低/工期短/成本低/可维护性强（加权：UX 4.6｜代码整洁 4.5｜部署便捷 4.9｜安全 4.2｜成本 4.8 → 总分 4.62）
- B) Web 界面 + API 后端
   - 效果：范围扩大/风险中/质量需全栈测试/复杂度高/工期长/成本中/可维护性中（加权：UX 4.2｜代码整洁 3.5｜部署便捷 3.0｜安全 3.5｜成本 3.0 → 总分 3.66）
- C) 混合模式（CLI + Web 双界面）
   - 效果：范围最大/风险高/质量复杂/复杂度很高/工期最长/成本高/可维护性中（加权：UX 4.0｜代码整洁 3.0｜部署便捷 2.5｜安全 3.0｜成本 2.5 → 总分 3.30）

Q3. 符号链接扫描范围策略？
- A) 递归扫描指定根目录所有子目录 ★
   - 效果：范围全面/风险低/质量需性能优化/复杂度中/工期中/成本低/可观测性好（加权：UX 4.4｜代码整洁 4.0｜部署便捷 4.5｜安全 4.0｜成本 4.5 → 总分 4.32）
- B) 仅扫描一级子目录（浅层扫描）
   - 效果：范围受限/风险低/质量简单/复杂度低/工期短/成本低/可观测性简单（加权：UX 3.5｜代码整洁 4.2｜部署便捷 4.8｜安全 4.2｜成本 4.8 → 总分 4.03）
- C) 用户可配置扫描深度与排除规则
   - 效果：范围灵活/风险中/质量需配置验证/复杂度高/工期长/成本中/可观测性需增强（加权：UX 4.8｜代码整洁 3.8｜部署便捷 3.5｜安全 3.8｜成本 3.5 → 总分 4.11）

Q4. 分类配置文件格式与存储？
- A) Markdown 格式，存储在项目根目录 ★
   - 效果：范围简单/风险低/质量易验证/复杂度低/工期短/成本低/可维护性强（加权：UX 4.5｜代码整洁 4.6｜部署便捷 4.8｜安全 4.5｜成本 4.8 → 总分 4.62）
- B) YAML/JSON 格式，支持 schema 验证
   - 效果：范围适中/风险低/质量可机器验证/复杂度中/工期中/成本低/可维护性强（加权：UX 4.0｜代码整洁 4.5｜部署便捷 4.5｜安全 4.2｜成本 4.5 → 总分 4.32）
- C) 数据库存储（SQLite）
   - 效果：范围复杂/风险中/质量需迁移支持/复杂度高/工期长/成本中/可维护性中（加权：UX 3.5｜代码整洁 3.8｜部署便捷 3.0｜安全 3.8｜成本 3.2 → 总分 3.54）

Q5. 目标路径迁移的安全策略？
- A) 迁移前强制创建备份 + 原子操作 + 回滚机制 ★
   - 效果：范围全面/风险最低/质量高/复杂度高/工期长/成本中/可观测性强（加权：UX 4.2｜代码整洁 4.5｜部署便捷 4.0｜安全 5.0｜成本 4.0 → 总分 4.35）
- B) 用户确认后直接迁移 + 日志记录
   - 效果：范围简单/风险高/质量中/复杂度低/工期短/成本低/可观测性中（加权：UX 4.0｜代码整洁 4.0｜部署便捷 4.5｜安全 2.5｜成本 4.5 → 总分 3.80）
- C) 先复制验证再删除源文件
   - 效果：范围中等/风险中/质量较高/复杂度中/工期中/成本中/可观测性好（加权：UX 4.1｜代码整洁 4.2｜部署便捷 4.2｜安全 4.0｜成本 3.8 → 总分 4.12）

Q6. 全局 CLI 命令安装方式？
- A) Python 包 + setuptools entry_points ★
   - 效果：范围标准/风险低/质量依赖生态/复杂度低/工期短/成本低/可维护性强（加权：UX 4.5｜代码整洁 4.8｜部署便捷 4.6｜安全 4.5｜成本 4.8 → 总分 4.64）
- B) 手动脚本安装（复制到 /usr/local/bin）
   - 效果：范围简单/风险中/质量需手动维护/复杂度低/工期短/成本低/可维护性弱（加权：UX 3.5｜代码整洁 3.0｜部署便捷 3.5｜安全 3.0｜成本 4.5 → 总分 3.39）
- C) 容器化部署（Docker）
   - 效果：范围隔离/风险低/质量高/复杂度高/工期长/成本高/可维护性强但重（加权：UX 3.0｜代码整洁 4.0｜部署便捷 2.5｜安全 4.8｜成本 2.5 → 总分 3.31）

Q7. 错误处理与边界场景策略？
- A) 预检查 + 干运行模式 + 详细错误提示 ★
   - 效果：范围全面/风险最低/质量高/复杂度中/工期中/成本中/可观测性强（加权：UX 4.8｜代码整洁 4.5｜部署便捷 4.3｜安全 4.8｜成本 4.0 → 总分 4.58）
- B) 简单 try-catch + 基础日志
   - 效果：范围基础/风险中/质量低/复杂度低/工期短/成本低/可观测性弱（加权：UX 3.0｜代码整洁 3.5｜部署便捷 4.5｜安全 2.5｜成本 4.8 → 总分 3.39）
- C) 渐进式错误处理（MVP 先简单，后续迭代增强）
   - 效果：范围灵活/风险中/质量渐进/复杂度中/工期分阶段/成本中/可观测性渐进（加权：UX 4.0｜代码整洁 4.0｜部署便捷 4.5｜安全 3.5｜成本 4.2 → 总分 4.04）

Q8. 测试与验证策略？
- A) 单元测试 + 集成测试 + 模拟文件系统环境 ★
   - 效果：范围全面/风险低/质量高/复杂度高/工期长/成本中/可维护性强（加权：UX 4.0｜代码整洁 4.8｜部署便捷 4.0｜安全 4.8｜成本 3.8 → 总分 4.32）
- B) 手动测试 + 关键路径自动化
   - 效果：范围中等/风险中/质量中/复杂度低/工期短/成本低/可维护性中（加权：UX 3.5｜代码整洁 3.5｜部署便捷 4.5｜安全 3.0｜成本 4.5 → 总分 3.74）
- C) MVP 无测试，后续补充
   - 效果：范围最小/风险高/质量不保证/复杂度最低/工期最短/成本最低/可维护性差（加权：UX 2.5｜代码整洁 2.0｜部署便捷 5.0｜安全 1.5｜成本 5.0 → 总分 2.78）

建议与权衡：
- 建议：Q1→A, Q2→A, Q3→A, Q4→A, Q5→A, Q6→A, Q7→A, Q8→A
- 理由：
  1. 聚焦个人开发者场景，降低范围与复杂度
  2. 纯 CLI/TUI 交互，部署便捷且符合目标用户习惯
  3. 递归扫描确保完整性，配合性能优化
  4. Markdown 配置简单直观，易于手动编辑
  5. 强制备份与原子操作确保数据安全（核心风险点）
  6. 标准 Python 打包方式，生态成熟
  7. 预检查与干运行提升用户信心
  8. 完整测试覆盖，确保文件操作正确性

---

## Cycle 2 - 2025-10-13 17:05  (@source: REQUIRES.md + immediate UX issue)
Progress: 50.00%  (4/8 tasks completed from TASKS.md)

**Critical UX Issue: TUI Display Optimization**

Q1. Main list display format for symlink paths?
- A) Show only basename (filename/link name) ★
   - 效果：范围/清晰度最优/风险极低/质量/用户体验最佳/复杂度极低/工期最短（15分钟）/成本极低/可维护性强（加权：UX 5.0｜代码整洁 4.8｜部署便捷 5.0｜安全 4.5｜成本 5.0 → 总分 4.90）
- B) Show relative path from scan root
   - 效果：范围/信息量中等/风险低/质量好/用户体验中/复杂度低/工期短（30分钟）/成本低/可维护性强（加权：UX 3.5｜代码整洁 4.2｜部署便捷 4.5｜安全 4.5｜成本 4.5 → 总分 4.08）
- C) Keep full path (current behavior)
   - 效果：范围/信息完整但混乱/风险无/质量/用户体验差/复杂度无/工期无/成本无/可维护性现状（加权：UX 1.5｜代码整洁 4.0｜部署便捷 5.0｜安全 4.5｜成本 5.0 → 总分 3.22）

Q2. Detail view information structure?
- A) Panel with labeled sections (Name/Symlink Location/Target Path/Status) ★
   - 效果：范围/信息清晰分层/风险极低/质量最佳/用户体验优秀/复杂度低/工期短（20分钟）/成本低/可观测性强（加权：UX 4.9｜代码整洁 4.6｜部署便捷 4.8｜安全 4.5｜成本 4.8 → 总分 4.76）
- B) Simple text block without clear structure
   - 效果：范围/信息混杂/风险低/质量中/用户体验差/复杂度最低/工期最短/成本最低/可观测性弱（加权：UX 2.5｜代码整洁 3.5｜部署便捷 5.0｜安全 4.5｜成本 5.0 → 总分 3.58）
- C) Table format with rows
   - 效果：范围/信息结构化/风险低/质量好/用户体验好/复杂度中/工期中（25分钟）/成本低/可观测性强（加权：UX 4.2｜代码整洁 4.4｜部署便捷 4.5｜安全 4.5｜成本 4.5 → 总分 4.42）

Q3. Color coding and visual hierarchy strategy?
- A) Keep current color scheme (green=valid, red=broken) ★
   - 效果：范围/一致性/风险无/质量保持/用户体验已验证/复杂度无/工期无/成本无/可访问性好（加权：UX 4.5｜代码整洁 5.0｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 4.82）
- B) Add more color variations for different states
   - 效果：范围扩展/视觉丰富/风险低/质量需测试/用户体验可能更好/复杂度中/工期中/成本低/可访问性需注意（加权：UX 4.0｜代码整洁 3.8｜部署便捷 4.0｜安全 4.0｜成本 4.0 → 总分 3.98）

Q4. Path display in detail view terminology?
- A) Use "Symlink Location" and "Target Path" labels ★
   - 效果：范围/语义清晰/风险极低/质量/专业术语准确/用户体验最佳/复杂度无/工期极短（5分钟）/成本无/可理解性强（加权：UX 5.0｜代码整洁 5.0｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 5.00）
- B) Use "Link Path" and "Points To" labels
   - 效果：范围/语义简化/风险极低/质量/通俗表达/用户体验好/复杂度无/工期极短/成本无/可理解性强（加权：UX 4.5｜代码整洁 4.8｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 4.82）
- C) Use "Source" and "Destination" labels
   - 效果：范围/语义模糊/风险低/质量/易混淆迁移操作/用户体验中/复杂度无/工期极短/成本无/可理解性弱（加权：UX 3.0｜代码整洁 4.5｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 4.18）

Q5. Grouping visual separation strategy?
- A) Keep current approach (text headers with color) ★
   - 效果：范围/简洁清晰/风险无/质量已验证/用户体验好/复杂度无/工期无/成本无/可维护性强（加权：UX 4.5｜代码整洁 5.0｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 4.82）
- B) Use Rich panels for each group
   - 效果：范围/视觉隔离强/风险低/质量好/用户体验更佳/复杂度中/工期中（30分钟）/成本低/可维护性好（加权：UX 4.8｜代码整洁 4.2｜部署便捷 4.5｜安全 5.0｜成本 4.5 → 总分 4.62）
- C) Use horizontal rules between groups
   - 效果：范围/视觉分隔轻/风险低/质量好/用户体验中/复杂度低/工期短（15分钟）/成本低/可维护性强（加权：UX 4.2｜代码整洁 4.6｜部署便捷 4.8｜安全 5.0｜成本 4.8 → 总分 4.58）

Q6. Implementation approach - files to modify?
- A) Modify tui.py display logic only (minimal change) ★
   - 效果：范围/最小化/风险最低/质量/隔离变更/用户体验修复/复杂度最低/工期最短/成本最低/可维护性最优（加权：UX 4.8｜代码整洁 5.0｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 4.96）
- B) Refactor SymlinkInfo dataclass to include display fields
   - 效果：范围/较大/风险中/质量/需修改多处/用户体验修复/复杂度中/工期长/成本中/可维护性需测试（加权：UX 4.5｜代码整洁 3.5｜部署便捷 3.5｜安全 4.0｜成本 3.5 → 总分 3.98）

Q7. Testing strategy for this fix?
- A) Manual testing with `lk` command + visual verification ★
   - 效果：范围/适度/风险低/质量/快速反馈/用户体验验证/复杂度低/工期短/成本低/可维护性好（加权：UX 4.8｜代码整洁 4.0｜部署便捷 5.0｜安全 4.5｜成本 5.0 → 总分 4.68）
- B) Add automated TUI snapshot tests
   - 效果：范围/全面/风险最低/质量最高/用户体验保障/复杂度高/工期长/成本中/可维护性最优（加权：UX 4.5｜代码整洁 4.8｜部署便捷 3.5｜安全 4.8｜成本 3.5 → 总分 4.38）
- C) No formal testing (quick fix)
   - 效果：范围/最小/风险高/质量/无保障/用户体验不确定/复杂度无/工期最短/成本最低/可维护性差（加权：UX 3.0｜代码整洁 3.0｜部署便捷 5.0｜安全 2.5｜成本 5.0 → 总分 3.32）

Q8. Deployment and rollback plan?
- A) Git commit with clear message + tag for easy rollback ★
   - 效果：范围/标准流程/风险极低/质量/可追溯/用户体验/复杂度无/工期极短（2分钟）/成本无/可回滚性完美（加权：UX 5.0｜代码整洁 5.0｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 5.00）
- B) Direct commit without special handling
   - 效果：范围/简化/风险低/质量/基本可追溯/用户体验/复杂度无/工期最短/成本无/可回滚性好（加权：UX 4.5｜代码整洁 4.8｜部署便捷 5.0｜安全 4.8｜成本 5.0 → 总分 4.82）

建议与权衡：
- 建议：Q1→A, Q2→A, Q3→A, Q4→A, Q5→A, Q6→A, Q7→A, Q8→A
- 理由：
  1. 显示 basename 完美解决路径混乱问题，用户可快速识别链接名称
  2. Panel 结构化显示确保详情信息清晰可读
  3. 保持现有配色方案，避免引入不必要的视觉复杂度
  4. "Symlink Location" / "Target Path" 术语专业且语义明确
  5. 保持现有分组方式，已验证有效
  6. 最小化修改范围，仅改 tui.py 显示逻辑，降低风险
  7. 手动测试快速验证，适合此类 UI 修复
  8. Git 标准流程确保可追溯和快速回滚

---

## Cycle 3 - 2025-10-13 20:30  (@source: REQUIRES.md + UX Enhancement Request)
Progress: 62.50%  (5/8 tasks completed from TASKS.md)

**Critical UX Enhancement: TUI Scrolling & Adaptive Width**

Q1. Viewport scrolling strategy for large lists?
- A) Viewport-based rendering with centered cursor ★
   - 效果：范围/性能最优/风险低/质量/用户体验最佳（支持1000+项）/复杂度中/工期短（1h）/成本低/可观测性强（加权：UX 5.0｜代码整洁 4.5｜部署便捷 4.8｜安全 4.8｜成本 4.8 → 总分 4.86）
- B) Page-based scrolling (PgUp/PgDn only)
   - 效果：范围/简单但跳跃/风险低/质量中/用户体验不够流畅/复杂度低/工期短/成本低/可观测性中（加权：UX 3.5｜代码整洁 4.6｜部署便捷 4.8｜安全 4.8｜成本 4.8 → 总分 4.26）
- C) Load all items (current behavior - broken for large lists)
   - 效果：范围/无法使用/风险高/质量/不可用/用户体验最差/复杂度无/工期无/成本无/可观测性无（加权：UX 0.5｜代码整洁 4.0｜部署便捷 5.0｜安全 4.0｜成本 5.0 → 总分 3.08）

Q2. Scroll indicator design?
- A) "↑ N more above" / "↓ N more below" with dim cyan style ★
   - 效果：范围/清晰直观/风险极低/质量/视觉不侵入/用户体验优秀/复杂度低/工期短（15min）/成本低/可访问性强（加权：UX 4.9｜代码整洁 4.8｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 4.94）
- B) Progress bar style indicator (█░░░░ 20%)
   - 效果：范围/视觉重/风险低/质量好/用户体验较好/复杂度中/工期中（30min）/成本低/可访问性中（加权：UX 4.0｜代码整洁 4.2｜部署便捷 4.5｜安全 5.0｜成本 4.5 → 总分 4.36）
- C) No indicators (user guesses if more items exist)
   - 效果：范围/极简但混乱/风险中/质量差/用户体验差/复杂度最低/工期最短/成本最低/可观测性无（加权：UX 1.5｜代码整洁 5.0｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 3.58）

Q3. Adaptive column width calculation strategy?
- A) Name 30%, Status fixed 10 chars, Target remaining ★
   - 效果：范围/平衡合理/风险低/质量/适配80-200列终端/用户体验最佳/复杂度中/工期中（30min）/成本低/可维护性强（加权：UX 4.8｜代码整洁 4.6｜部署便捷 4.8｜安全 4.8｜成本 4.8 → 总分 4.76）
- B) Fixed column widths (current - breaks on narrow terminals)
   - 效果：范围/不适配/风险高/质量差/用户体验/窄终端不可用/复杂度无/工期无/成本无/可维护性现状（加权：UX 2.0｜代码整洁 4.5｜部署便捷 5.0｜安全 4.8｜成本 5.0 → 总分 3.78）
- C) Content-based dynamic width (measure actual text)
   - 效果：范围/精确但重/风险中/质量最高/用户体验优秀/复杂度高/工期长（2h）/成本中/可维护性复杂（加权：UX 4.9｜代码整洁 3.8｜部署便捷 4.0｜安全 4.8｜成本 3.8 → 总分 4.38）

Q4. Text truncation strategy for long names/paths?
- A) Truncate with "…" suffix when exceeding column width ★
   - 效果：范围/标准做法/风险极低/质量高/用户体验好（hover不可用，需Enter查看）/复杂度低/工期短（15min）/成本低/可访问性强（加权：UX 4.6｜代码整洁 4.8｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 4.88）
- B) Word wrap with overflow
   - 效果：范围/多行显示/风险低/质量好/用户体验/可能打乱行对齐/复杂度中/工期中/成本低/可访问性强（加权：UX 3.8｜代码整洁 4.0｜部署便捷 4.5｜安全 5.0｜成本 4.8 → 总分 4.26）
- C) Horizontal scrolling (left/right arrows)
   - 效果：范围/复杂交互/风险中/质量好/用户体验/需额外按键/复杂度高/工期长（1.5h）/成本中/可访问性中（加权：UX 3.5｜代码整洁 3.5｜部署便捷 4.0｜安全 5.0｜成本 3.8 → 总分 3.92）

Q5. Group header preservation during scrolling?
- A) Include headers by scanning backwards from visible range ★
   - 效果：范围/上下文保持/风险低/质量高/用户体验最佳（始终知道在哪个项目）/复杂度中/工期中（30min）/成本低/可观测性强（加权：UX 5.0｜代码整洁 4.4｜部署便捷 4.8｜安全 4.8｜成本 4.8 → 总分 4.84）
- B) Show headers only when first item of group is visible
   - 效果：范围/简单但失上下文/风险低/质量中/用户体验/滚动中丢失项目信息/复杂度低/工期短（15min）/成本低/可观测性弱（加权：UX 3.0｜代码整洁 4.8｜部署便捷 5.0｜安全 4.8｜成本 5.0 → 总分 4.14）
- C) Sticky header (always show current group at top)
   - 效果：范围/复杂实现/风险中/质量最高/用户体验最佳/复杂度高/工期长（1.5h）/成本中/可观测性最强（加权：UX 5.0｜代码整洁 3.8｜部署便捷 4.2｜安全 4.8｜成本 4.0 → 总分 4.52）

Q6. Performance optimization for large lists (1000+ items)?
- A) Render only visible viewport (O(viewport_size) not O(total)) ★
   - 效果：范围/关键优化/风险极低/质量高/用户体验/流畅无卡顿/复杂度低/工期短（20min）/成本低/可扩展性完美（加权：UX 5.0｜代码整洁 4.8｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 4.96）
- B) Lazy loading with pagination
   - 效果：范围/分批加载/风险中/质量好/用户体验/需加载等待/复杂度高/工期长（2h）/成本中/可扩展性好（加权：UX 4.0｜代码整洁 4.0｜部署便捷 4.2｜安全 4.8｜成本 4.0 → 总分 4.18）
- C) Render all items (current - fails at ~100+)
   - 效果：范围/不可扩展/风险高/质量差/用户体验/大列表卡死/复杂度无/工期无/成本无/可扩展性零（加权：UX 0.5｜代码整洁 4.0｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 3.18）

Q7. Testing strategy for scrolling functionality?
- A) Create test script generating 60+ symlinks + manual verification ★
   - 效果：范围/实际场景测试/风险低/质量高/用户体验验证/复杂度低/工期短（30min）/成本低/可重现性强（加权：UX 4.8｜代码整洁 4.5｜部署便捷 4.8｜安全 4.8｜成本 4.8 → 总分 4.74）
- B) Unit tests only (mock terminal size)
   - 效果：范围/自动化/风险中/质量好/用户体验/无实际验证/复杂度中/工期中（1h）/成本低/可重现性最强（加权：UX 3.5｜代码整洁 4.8｜部署便捷 4.5｜安全 4.8｜成本 4.5 → 总分 4.38）
- C) Manual testing on real directory
   - 效果：范围/依赖环境/风险中/质量中/用户体验验证/复杂度最低/工期短（15min）/成本低/可重现性差（加权：UX 4.0｜代码整洁 4.0｜部署便捷 5.0｜安全 4.5｜成本 5.0 → 总分 4.38）

Q8. Documentation and user guidance?
- A) Create TUI_SCROLLING.md with implementation details + test guide ★
   - 效果：范围/完整文档/风险极低/质量最高/用户体验/可理解性强/复杂度低/工期短（30min）/成本低/可维护性最优（加权：UX 4.8｜代码整洁 5.0｜部署便捷 5.0｜安全 5.0｜成本 4.8 → 总分 4.92）
- B) Update CHANGELOG.md only
   - 效果：范围/简要记录/风险低/质量中/用户体验/基本了解/复杂度最低/工期最短（10min）/成本低/可维护性好（加权：UX 3.5｜代码整洁 4.8｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 4.48）
- C) No documentation (code comments only)
   - 效果：范围/最小/风险中/质量差/用户体验/不可发现/复杂度无/工期无/成本最低/可维护性弱（加权：UX 2.0｜代码整洁 4.0｜部署便捷 5.0｜安全 5.0｜成本 5.0 → 总分 3.68）

建议与权衡：
- 建议：Q1→A, Q2→A, Q3→A, Q4→A, Q5→A, Q6→A, Q7→A, Q8→A
- 理由：
  1. Viewport-based rendering 确保性能，支持任意大小列表
  2. 简洁的文本滚动指示器清晰直观，不占用过多空间
  3. 比例式列宽适配所有常见终端尺寸（80-200列）
  4. 标准 "…" 截断符合用户预期，需完整信息时按 Enter 查看详情

## Cycle 1 - 2025-10-13 19:09  (@source: REQUIRES.md + PLAN prompt.md)
Progress: 0.00%  (from TASKS.md)

**[S0｜完成度 0%]**

Q1 过滤策略基线？（硬编码 vs 可配置）
选项：A 全部硬编码在代码中｜B 全量可配置（文件/CLI） ★｜C 混合：核心默认硬编码 + 可覆盖
效果（影响对比）：
- A 简单但灵活性差；版本变更需发版；易分叉
  （UX 3.4｜风险 3.2｜质量 3.8｜复杂度 4.8｜工期 4.8｜成本 4.8｜可观测性 3.5 → 总分 4.04）
- B 灵活统一；支持团队协作与溯源；需做校验
  （UX 4.7｜风险 4.3｜质量 4.6｜复杂度 3.8｜工期 3.8｜成本 4.2｜可观测性 4.7 → 总分 4.30） ★
- C 折中；易出现“默认/覆盖”双通道歧义
  （UX 4.3｜风险 3.8｜质量 4.2｜复杂度 4.2｜工期 4.2｜成本 4.4｜可观测性 4.2 → 总分 4.18）

Q2 默认过滤模式与模式集？（include/exclude）
选项：A 默认仅 exclude 常见噪声（最安全） ★｜B 默认 include 受限白名单｜C 默认关闭过滤（用户自行启用）
效果（影响对比）：
- A 直接降噪，保留可见性；误杀概率低；可覆盖
  （UX 4.6｜风险 4.5｜质量 4.5｜复杂度 4.5｜工期 4.5｜成本 4.8｜可观测性 4.6 → 总分 4.46） ★
- B 精准但需要大量维护，易漏查
  （UX 3.9｜风险 3.8｜质量 4.2｜复杂度 3.8｜工期 3.6｜成本 4.2｜可观测性 4.4 → 总分 4.02）
- C 最大自由但体验不稳定，噪声多
  （UX 3.2｜风险 3.5｜质量 3.6｜复杂度 4.9｜工期 4.9｜成本 4.9｜可观测性 3.6 → 总分 4.02）

Q3 配置文件格式？
选项：A YAML（含 schema 校验） ★｜B Markdown 列表（与分类同风格）｜C TOML/JSON（标准但冗长）
效果（影响对比）：
- A 结构清晰、天然表达 include/exclude/优先级；易校验
  （UX 4.6｜风险 4.5｜质量 4.8｜复杂度 4.2｜工期 4.2｜成本 4.6｜可观测性 4.8 → 总分 4.53） ★
- B 学习成本最低，但缺乏严格结构与校验
  （UX 4.4｜风险 3.8｜质量 4.0｜复杂度 4.6｜工期 4.6｜成本 4.8｜可观测性 4.0 → 总分 4.31）
- C 通用标准，表达性强但可读性一般
  （UX 4.0｜风险 4.3｜质量 4.6｜复杂度 4.0｜工期 4.0｜成本 4.6｜可观测性 4.6 → 总分 4.29）

Q4 CLI 选项范围？
选项：A 仅 `--filter-config` 指向文件｜B `--include`/`--exclude` 可多次 + `--filter-config` ★｜C 追加 `--filter-mode`、`--dry-run-filter` 等高级项
效果（影响对比）：
- A 极简但可操作性弱，需频繁改文件
  （UX 3.6｜风险 4.2｜质量 4.4｜复杂度 4.8｜工期 4.8｜成本 4.9｜可观测性 4.2 → 总分 4.27）
- B 常用场景一次搞定；文件与命令互补
  （UX 4.7｜风险 4.4｜质量 4.7｜复杂度 4.2｜工期 4.2｜成本 4.6｜可观测性 4.7 → 总分 4.50） ★
- C 灵活但学习曲线陡；需要更多帮助文档
  （UX 4.2｜风险 4.2｜质量 4.6｜复杂度 3.6｜工期 3.8｜成本 4.5｜可观测性 4.8 → 总分 4.25）

Q5 性能与匹配实现？
选项：A 预编译 glob/regex + 目录级短路 ★｜B 逐项匹配（简单实现）｜C 建索引与缓存（复杂体系）
效果（影响对比）：
- A 快速稳定；大目录 O(n) 但常数小；内存低
  （UX 4.8｜风险 4.6｜质量 4.8｜复杂度 4.2｜工期 4.2｜成本 4.7｜可观测性 4.5 → 总分 4.54） ★
- B 最易实现，但在 10w+ 文件会抖动
  （UX 4.0｜风险 3.8｜质量 4.0｜复杂度 4.8｜工期 4.8｜成本 4.9｜可观测性 4.0 → 总分 4.27）
- C 最高性能但过度设计；维护成本高
  （UX 4.4｜风险 4.0｜质量 4.6｜复杂度 3.2｜工期 3.2｜成本 3.6｜可观测性 4.6 → 总分 4.07）

Q6 测试策略？
选项：A 单测 + 参数化目录样例 + 性能基准 ★｜B 仅端到端集成测试｜C 以属性测试为主（Hypothesis）
效果（影响对比）：
- A 可覆盖边界与性能回归；最均衡
  （UX 4.6｜风险 4.7｜质量 4.8｜复杂度 4.3｜工期 4.2｜成本 4.4｜可观测性 4.8 → 总分 4.54） ★
- B 简单但定位慢、粒度粗
  （UX 4.2｜风险 4.0｜质量 4.2｜复杂度 4.7｜工期 4.7｜成本 4.8｜可观测性 4.2 → 总分 4.33）
- C 找边界强，但维护成本较高
  （UX 4.4｜风险 4.4｜质量 4.7｜复杂度 3.8｜工期 3.7｜成本 4.2｜可观测性 4.6 → 总分 4.25）

Q7 文档策略？
选项：A 新增 FILTERING.md + README/--help 示例 ★｜B 仅 CHANGELOG 说明｜C 代码注释为主
效果（影响对比）：
- A 可学习性强，示例直达 CLI/配置；便于回溯
  （UX 4.8｜风险 4.6｜质量 4.8｜复杂度 4.6｜工期 4.4｜成本 4.8｜可观测性 4.9 → 总分 4.70） ★
- B 最省事但不足以指导使用
  （UX 4.0｜风险 4.3｜质量 4.2｜复杂度 4.9｜工期 4.9｜成本 5.0｜可观测性 4.0 → 总分 4.46）
- C 成本最低但不可搜索/复用
  （UX 3.2｜风险 3.8｜质量 3.6｜复杂度 5.0｜工期 5.0｜成本 5.0｜可观测性 3.5 → 总分 4.16）

Q8 上线与回滚计划？
选项：A 默认启用 exclude 基础集，提供 `--no-filter` 快速关闭 ★｜B 默认关闭，用户手动开启｜C 分支灰度（仅特定目录启用）
效果（影响对比）：
- A 开箱稳定；出现问题可单次关闭；便于观测
  （UX 4.7｜风险 4.6｜质量 4.7｜复杂度 4.6｜工期 4.6｜成本 4.8｜可观测性 4.8 → 总分 4.69） ★
- B 最安全但体验割裂，用户负担大
  （UX 3.8｜风险 4.8｜质量 4.6｜复杂度 5.0｜工期 5.0｜成本 5.0｜可观测性 4.4 → 总分 4.53）
- C 可控性强但实现与认知复杂
  （UX 4.2｜风险 4.5｜质量 4.6｜复杂度 3.8｜工期 3.8｜成本 4.4｜可观测性 4.8 → 总分 4.30）
  5. 后向扫描包含 header 确保用户始终知道当前项目上下文
  6. 只渲染可见项实现 O(viewport) 性能，1000+项依然流畅
  7. 测试脚本生成真实场景，可重复验证，快速反馈
  8. 完整文档确保用户理解功能，开发者理解实现，便于维护
